buildscript {
  ext.kotlin_version = '1.0.0-beta-4584'
  ext.kotlin_xml_dsl_version = '0.1.3'
  ext.kotlin_xml_bind_version = '0.1.4'

  repositories { mavenCentral() }
  dependencies { classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version" }
}

plugins {
  id "com.jfrog.bintray" version "1.5"
}

version = project.hasProperty('teamcity') ? project['teamcity']['build.number'] : 'SNAPSHOT'

subprojects {
  apply plugin: 'java'
  apply plugin: 'kotlin'

  group = 'org.jonnyzzz.teamcity.dsl'

  sourceCompatibility = 1.8
  targetCompatibility = 1.8

  repositories {
    mavenCentral()
    maven { url "http://dl.bintray.com/jonnyzzz/maven" }
  }
}

task wrapper(type: Wrapper) {
  gradleVersion = '2.9'
}

task bintrayUploadEx {
  dependsOn ':DSL:bintrayUpload'
}

task localUploadEx {
  dependsOn ':DSL:publishToLocalMaven'
}
